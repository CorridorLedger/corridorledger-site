<!DOCTYPE html>
<html lang="en" data-theme="light">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Corridor Ledger</title>
  <meta name="description" content="Corridor Ledger investigates the unseen machinery of power—contracts, committees, and quiet capital—so readers can see how decisions are actually made.">

  <!-- Favicons -->
  <link rel="icon" href="favicon.ico" type="image/x-icon" />
  <link rel="icon" type="image/png" sizes="32x32" href="favicon-32x32.png" />
  <link rel="apple-touch-icon" sizes="180x180" href="apple-touch-icon.png" media="(prefers-color-scheme: light)">
  <link rel="apple-touch-icon" sizes="180x180" href="apple-touch-icon-dark.png" media="(prefers-color-scheme: dark)">
  <meta name="theme-color" content="#ffffff" />

  <!-- Styles -->
  <link rel="stylesheet" href="main.css" />

  <!-- Social sharing -->
  <meta property="og:title" content="Corridor Ledger">
  <meta property="og:description" content="Power, documented.">
  <meta property="og:image" content="wordmark_header_1200w.png">
  <meta name="twitter:card" content="summary_large_image">
</head>
<body>
  <header class="site-header">
    <!-- top bar: fixed top-left menu, centered wordmark, top-right theme toggle -->
    <div class="brand">
      <button class="icon-btn menu-btn" id="menuToggle"
              aria-label="Open menu" aria-expanded="false" aria-controls="dropdown">
        ☰
      </button>

      <!-- Both wordmarks present; CSS shows the correct one by theme -->
      <a href="/" class="logo-link" aria-label="Corridor Ledger home">
        <img
          src="wordmark_header_1200w.png"
          srcset="wordmark_header_512w.png 512w,
                  wordmark_header_800w.png 800w,
                  wordmark_header_1200w.png 1200w,
                  wordmark_header.png 2000w"
          sizes="(max-width: 900px) 70vw, 560px"
          alt="Corridor Ledger"
          class="wordmark wordmark-light"
          decoding="async"
          loading="eager"
        />
        <img
          src="wordmark_header_dark_1200w.png"
          alt="Corridor Ledger"
          class="wordmark wordmark-dark"
          decoding="async"
          loading="eager"
        />
      </a>

      <!-- Theme toggle uses your simple icons -->
      <button class="icon-btn theme-btn" id="themeToggle" aria-label="Toggle dark mode">
        <img src="sun-icon-simple-outline-style-brightness-symbol-intensity-setting-bright-light-heat-energy-concept-line-illustration-isolated-on-white-background-eps-10-vector-4285491907.jpeg" alt="" class="theme-icon theme-icon-sun" />
        <img src="moon-icon-simple-outline-style-half-moon-crescent-moon-star-light-flat-design-night-sleep-time-concept-thin-line-illustration-isolated-on-white-background-eps-10-vector-3039231804.jpeg" alt="" class="theme-icon theme-icon-moon" />
      </button>
    </div>

    <!-- centered desktop nav (no active highlight here) -->
    <nav class="nav desktop-nav" aria-label="Primary">
      <a href="/">Home</a>
      <a href="/mechanisms/">Mechanisms</a>
      <a href="/figures/">Figures</a>
      <a href="/numbers/">Numbers</a>
      <a href="/dossiers/">Dossiers</a>
      <a href="mailto:tips@corridorledger.com">Tips</a>
    </nav>

    <!-- Dropdown under the menu button (opens beneath) -->
    <div class="dropdown" id="dropdown" aria-hidden="true">
      <form class="dropdown-search" onsubmit="return false" role="search" aria-label="Site search">
        <input class="search-input" type="search" placeholder="Search Corridor Ledger" />
      </form>

      <nav class="dropdown-nav" aria-label="Mobile primary">
        <a href="/" data-route="/">Home</a>
        <a href="/mechanisms/" data-route="/mechanisms/">Mechanisms</a>
        <a href="/figures/" data-route="/figures/">Figures</a>
        <a href="/numbers/" data-route="/numbers/">Numbers</a>
        <a href="/dossiers/" data-route="/dossiers/">Dossiers</a>
        <a href="mailto:tips@corridorledger.com">Tips</a>
      </nav>
    </div>
    <div class="dropdown-backdrop" id="backdrop" aria-hidden="true"></div>
  </header>

  <main id="main" class="container">
    <section class="rail">
      <article class="hero hero-center">
        <h1 class="headline">The Ledger Opens.</h1>
        <p class="dek">We’re building the first batch of stories now. Launches September 5, 2025.</p>
        <p class="muted">
          Have a document we should see?
          <a href="mailto:tips@corridorledger.com">tips@corridorledger.com</a>
        </p>
      </article>
    </section>

    <section class="rail cta">
      <div class="cta-box">
        <h2 class="cta-heading">Power, documented.</h2>
        <p class="muted same-as-heading">One issue per week. Evidence first.</p>
        <form onsubmit="return false" aria-label="Newsletter signup">
          <input type="email" placeholder="you@email.com" aria-label="Email" inputmode="email" />
          <button type="submit">Notify me</button>
        </form>
      </div>
    </section>
  </main>

  <footer class="site-footer">
    <div class="foot-left">
      <a href="feed.xml">RSS</a> · <a href="#">Corrections</a> ·
      <a href="mailto:editor@corridorledger.com">Editor</a> ·
      <a href="mailto:tips@corridorledger.com">Tips</a>
    </div>
    <div class="foot-right">
      © 2025 Corridor Ledger
    </div>
  </footer>

  <script>
    // Elements
    const menuToggle = document.getElementById('menuToggle');
    const dropdown   = document.getElementById('dropdown');
    const backdrop   = document.getElementById('backdrop');
    const themeToggle = document.getElementById('themeToggle');
    const root = document.documentElement;

    // Dropdown open/close
    function openDropdown(open) {
      dropdown.classList.toggle('open', open);
      backdrop.classList.toggle('show', open);
      menuToggle.setAttribute('aria-expanded', open ? 'true' : 'false');
      dropdown.setAttribute('aria-hidden', open ? 'false' : 'true');
      if (open) {
        markActiveInDropdown();
        dropdown.querySelector('.search-input')?.focus();
      }
    }
    menuToggle.addEventListener('click', () => openDropdown(!dropdown.classList.contains('open')));
    backdrop.addEventListener('click', () => openDropdown(false));
    document.addEventListener('keydown', (e) => { if (e.key === 'Escape') openDropdown(false); });
    dropdown.addEventListener('click', (e) => { if (e.target.tagName === 'A') openDropdown(false); });

    // Active link ONLY in dropdown
    function markActiveInDropdown() {
      const path = location.pathname.replace(/\/+$/,'/') || '/';
      document.querySelectorAll('.dropdown-nav [data-route]').forEach(a => {
        const route = a.getAttribute('data-route');
        const active = (route === '/' && path === '/') || (route !== '/' && path.startsWith(route));
        a.classList.toggle('active', active);
      });
    }

    // Theme toggle (light/dark) with localStorage
    (function initTheme(){
      const saved = localStorage.getItem('cl-theme');
      if (saved === 'dark' || saved === 'light') {
        root.setAttribute('data-theme', saved);
      } else if (window.matchMedia && window.matchMedia('(prefers-color-scheme: dark)').matches) {
        root.setAttribute('data-theme', 'dark');
      }
    })();

    themeToggle.addEventListener('click', () => {
      const next = root.getAttribute('data-theme') === 'dark' ? 'light' : 'dark';
      root.setAttribute('data-theme', next);
      localStorage.setItem('cl-theme', next);
    });
  </script>
</body>
</html>
