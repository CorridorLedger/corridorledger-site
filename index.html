<!DOCTYPE html>
<html lang="en" data-theme="auto">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Corridor Ledger</title>
  <meta name="description" content="Corridor Ledger investigates the unseen machinery of power—contracts, committees, and quiet capital—so readers can see how decisions are actually made.">

  <!-- Favicons -->
  <link rel="icon" href="favicon.ico" type="image/x-icon" />
  <link rel="icon" type="image/png" sizes="32x32" href="favicon-32x32.png" />
  <link rel="apple-touch-icon" sizes="180x180" href="favicon-180x180.png" />
  <meta name="theme-color" content="#ffffff" />

  <!-- Styles -->
  <link rel="stylesheet" href="main.css" />

  <!-- Social sharing -->
  <meta property="og:title" content="Corridor Ledger">
  <meta property="og:description" content="Power, documented.">
  <meta property="og:image" content="wordmark_header_1200w.png">
  <meta name="twitter:card" content="summary_large_image">
</head>
<body>
  <header class="site-header">
    <div class="topbar">
      <div class="controls-left">
        <!-- Menu (top-left). No thin outline; keyboard users still get focus-visible ring -->
        <button class="icon-btn menu-btn" id="menuToggle" aria-label="Open menu" aria-expanded="false" aria-controls="panel">
          <!-- simple hamburger (SVG) -->
          <svg width="24" height="24" viewBox="0 0 24 24" aria-hidden="true"><path d="M3 6h18M3 12h18M3 18h14" stroke="currentColor" stroke-width="2" stroke-linecap="round"/></svg>
        </button>
        <!-- Theme toggle. Uses your grunge icons; also no outline -->
        <button class="icon-btn theme-btn" id="themeToggle" aria-label="Toggle dark mode">
          <img src="sun_grunge_black_transparent.png" alt="" width="22" height="22" id="themeIcon">
        </button>
      </div>

      <!-- Brand centered -->
      <a href="/" class="logo-link" aria-label="Corridor Ledger home">
        <img
          id="brandImg"
          class="wordmark"
          src="wordmark_header_1200w.png"
          data-light-src="wordmark_header_1200w.png"
          data-dark-src="wordmark_header_dark_1200w.png"
          srcset="wordmark_header_512w.png 512w,
                  wordmark_header_800w.png 800w,
                  wordmark_header_1200w.png 1200w"
          sizes="(max-width: 900px) 70vw, 560px"
          alt="Corridor Ledger"
          decoding="async"
          loading="eager"
        />
      </a>

      <!-- right side spacer so logo stays centered -->
      <div class="controls-right" aria-hidden="true"></div>
    </div>

    <!-- Centered desktop nav -->
    <nav class="nav desktop-nav" aria-label="Primary">
      <a href="/" data-route="home">Home</a>
      <a href="/mechanisms/" data-route="mechanisms">Mechanisms</a>
      <a href="/figures/" data-route="figures">Figures</a>
      <a href="/numbers/" data-route="numbers">Numbers</a>
      <a href="/dossiers/" data-route="dossiers">Dossiers</a>
      <a href="/tips/" data-route="tips">Tips</a>
    </nav>

    <!-- Dropdown panel under the top-left button -->
    <aside class="panel" id="panel" hidden>
      <div class="panel-inner">
        <form class="panel-search" onsubmit="return false" role="search" aria-label="Site search">
          <input class="search-input" type="search" placeholder="Search Corridor Ledger" />
        </form>
        <nav class="panel-nav" aria-label="Mobile primary">
          <a href="/" data-route="home">Home</a>
          <a href="/mechanisms/" data-route="mechanisms">Mechanisms</a>
          <a href="/figures/" data-route="figures">Figures</a>
          <a href="/numbers/" data-route="numbers">Numbers</a>
          <a href="/dossiers/" data-route="dossiers">Dossiers</a>
          <a href="/tips/" data-route="tips">Tips</a>
        </nav>
      </div>
    </aside>
  </header>

  <main id="main" class="container">
    <section class="rail">
      <article class="hero hero-center">
        <h1 class="headline">The Ledger Opens.</h1>
        <p class="dek">We’re building the first batch of stories now. Launches September 5, 2025.</p>
        <p class="muted">Have a document we should see? <a href="mailto:tips@corridorledger.com">tips@corridorledger.com</a></p>
      </article>
    </section>

    <!-- Issues grid (sample; swap when you wire data) -->
    <section class="rail">
      <h2 class="center">Issues</h2>
      <div class="issues-grid">
        <a class="issue-card" href="/issues/1/">
          <img src="issue1_cover.png" alt="" />
          <div class="issue-meta">
            <div class="issue-title">Issue No. 1 — Spotlight Keepers</div>
            <p class="issue-tease">When cameras cut, decisions don’t. Consent agendas, emergency items, and the people who keep things moving.</p>
            <span class="btn-ghost">Read more →</span>
          </div>
        </a>
        <!-- duplicate this <a> for more issues -->
      </div>
    </section>

    <!-- CTA (email capture wired later to Buttondown/Mailchimp) -->
    <section class="rail cta">
      <div class="cta-box">
        <p class="muted same-size"><strong>Power, documented.</strong> One issue per week. Evidence first.</p>
        <form onsubmit="return false" aria-label="Newsletter signup">
          <input type="email" placeholder="you@email.com" aria-label="Email" inputmode="email" />
          <button type="submit">Notify me</button>
        </form>
      </div>
    </section>
  </main>

  <footer class="site-footer">
    <div class="foot-left">
      <a href="/feed.xml">RSS</a> · <a href="/corrections/">Corrections</a> ·
      <a href="mailto:editor@corridorledger.com">Editor</a> · <a href="/tips/">Tips</a>
    </div>
    <div class="foot-right">
      © 2025 Corridor Ledger
    </div>
  </footer>

  <script>
    // ------- Menu open/close (dropdown under button)
    const menuToggle = document.getElementById('menuToggle');
    const panel = document.getElementById('panel');

    function openPanel(open) {
      panel.hidden = !open;
      menuToggle.setAttribute('aria-expanded', open ? 'true' : 'false');
      document.body.classList.toggle('no-scroll', open);

      // Highlight current route only when panel is open
      document.querySelectorAll('.panel-nav a').forEach(a => {
        a.classList.remove('is-current');
        const route = a.dataset.route;
        if (open && location.pathname.startsWith('/' + (route === 'home' ? '' : route))) {
          a.classList.add('is-current');
        }
      });
    }
    menuToggle.addEventListener('click', () => openPanel(panel.hidden));
    document.addEventListener('keydown', (e) => { if (e.key === 'Escape') openPanel(false); });
    document.addEventListener('click', (e) => {
      if (!panel.hidden && !panel.contains(e.target) && e.target !== menuToggle) openPanel(false);
    });

    // ------- Theme toggle (light/dark + swap wordmark)
    const root = document.documentElement;
    const themeBtn = document.getElementById('themeToggle');
    const themeIcon = document.getElementById('themeIcon');
    const brandImg = document.getElementById('brandImg');

    function applyTheme(mode){
      root.setAttribute('data-theme', mode);
      const dark = mode === 'dark';
      themeIcon.src = dark ? 'moon_grunge_white_transparent.png'
                           : 'sun_grunge_black_transparent.png';
      brandImg.src = dark ? brandImg.dataset.darkSrc : brandImg.dataset.lightSrc;
    }
    // Respect saved preference, else system
    const saved = localStorage.getItem('cl-theme');
    if (saved) applyTheme(saved);
    themeBtn.addEventListener('click', () => {
      const next = (root.getAttribute('data-theme') === 'dark') ? 'light' : 'dark';
      localStorage.setItem('cl-theme', next);
      applyTheme(next);
    });
  </script>
</body>
</html>
