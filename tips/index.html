<!DOCTYPE html>
<html lang="en" data-theme="light">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Tips · Corridor Ledger</title>

  <!-- Keep this out of Google/Bing; site search will still find it -->
  <meta name="robots" content="noindex, nofollow" />

  <link rel="stylesheet" href="/main.css" />
  <link rel="icon" href="/favicon.ico" />
  <meta name="description" content="Send Corridor Ledger documents and leads." />
</head>
<body>
  <header class="site-header">
    <div class="brand">
      <button class="icon-btn menu-btn" id="menuToggle" aria-label="Open menu" aria-expanded="false" aria-controls="dropdown">☰</button>
      <a href="/" class="logo-link" aria-label="Corridor Ledger home">
        <img src="/wordmark_header_1200w.png" class="wordmark wordmark-light" alt="Corridor Ledger" />
        <img src="/wordmark_header_dark_1200w.png" class="wordmark wordmark-dark" alt="Corridor Ledger" />
      </a>
      <button class="icon-btn theme-btn" id="themeToggle" aria-label="Toggle dark mode">
        <img src="/sun_grunge_black_transparent.png" class="theme-icon theme-icon-sun" alt="" />
        <img src="/moon_grunge_white_transparent.png" class="theme-icon theme-icon-moon" alt="" />
      </button>
    </div>

    <!-- Dropdown (no Tips link here) -->
    <div class="dropdown" id="dropdown" aria-hidden="true">
      <form class="dropdown-search" role="search" action="/search/" method="GET">
        <input class="search-input" type="search" name="q" placeholder="Search Corridor Ledger" />
      </form>
      <nav class="dropdown-nav">
        <a href="/" data-route="/">Home</a>
        <a href="/mechanisms/" data-route="/mechanisms/">Mechanisms</a>
        <a href="/figures/" data-route="/figures/">Figures</a>
        <a href="/numbers/" data-route="/numbers/">Numbers</a>
        <a href="/dossiers/" data-route="/dossiers/">Dossiers</a>
      </nav>
    </div>
    <div class="dropdown-backdrop" id="backdrop" aria-hidden="true"></div>
  </header>

  <!-- data-pagefind-body ensures Pagefind will index this page for on-site search -->
  <main class="container" data-pagefind-body>
    <section class="rail">
      <article class="hero hero-center" style="max-width:780px;margin:0 auto;">
        <h1 class="headline">Tips</h1>
        <p class="dek">We’re adding a secure form. Until then, you can contact us directly.</p>

        <!-- Hidden synonyms to make on-site search find this page for many queries -->
        <p class="visually-hidden">
          tip, tips, leak, whistleblower, contact the newsroom, confidential, secure contact, share documents, submit documents
        </p>

        <!-- Email card -->
        <div class="tip-card">
          <h2 class="tip-subhead">Email (preferred for now)</h2>
          <p class="muted">Use a personal device/network if possible. Remove metadata from sensitive files.</p>

          <!-- Click to reveal address; keeps plain email out of source for basic bots -->
          <button class="reveal-btn" id="revealEmail" type="button" aria-controls="emailBox" aria-expanded="false">
            Reveal address
          </button>

          <div id="emailBox" class="email-box" hidden>
            <a id="tipMailto" class="btn-solid" href="#" rel="nofollow">tips@corridorledger.com</a>
            <button id="copyEmail" class="btn-ghost" type="button">Copy</button>
          </div>

          <!-- Fallback for no-JS readers -->
          <noscript>
            <p class="muted">tips [at] corridorledger [dot] com</p>
          </noscript>
        </div>

        <!-- Form placeholder (disabled for now) -->
        <div class="tip-card">
          <h2 class="tip-subhead">Secure web form (coming soon)</h2>
          <p class="muted">We’ll provide an in-browser form with basic anti-spam checks and file support.</p>
        </div>
      </article>
    </section>
  </main>

  <footer class="site-footer">
    <div class="foot-left">
      <a href="/feed.xml">RSS</a> · <a href="/corrections/">Corrections</a> ·
      <a href="mailto:editor@corridorledger.com">Editor</a>
    </div>
    <div class="foot-right">© 2025 Corridor Ledger</div>
  </footer>

  <script>
    // Menu + theme (same as elsewhere)
    const menuToggle=document.getElementById('menuToggle');
    const dropdown=document.getElementById('dropdown');
    const backdrop=document.getElementById('backdrop');
    const themeToggle=document.getElementById('themeToggle');
    const root=document.documentElement;

    function openDropdown(open){
      dropdown.classList.toggle('open',open);
      backdrop.classList.toggle('show',open);
      menuToggle.setAttribute('aria-expanded',open?'true':'false');
      dropdown.setAttribute('aria-hidden',open?'false':'true');
      document.body.classList.toggle('no-scroll',open);
      if(open){ dropdown.querySelector('.search-input')?.focus(); }
    }
    menuToggle.addEventListener('click',()=>openDropdown(!dropdown.classList.contains('open')));
    backdrop.addEventListener('click',()=>openDropdown(false));
    document.addEventListener('keydown',e=>{ if(e.key==='Escape') openDropdown(false); });

    (function initTheme(){
      const saved=localStorage.getItem('cl-theme');
      if(saved==='dark'||saved==='light'){ root.setAttribute('data-theme',saved); }
      else if(window.matchMedia && window.matchMedia('(prefers-color-scheme: dark)').matches){
        root.setAttribute('data-theme','dark');
      }
    })();
    themeToggle.addEventListener('click',()=>{
      const next=root.getAttribute('data-theme')==='dark'?'light':'dark';
      root.setAttribute('data-theme',next); localStorage.setItem('cl-theme',next);
    });

    // Email reveal & copy
    const revealBtn = document.getElementById('revealEmail');
    const emailBox  = document.getElementById('emailBox');
    const tipMailto = document.getElementById('tipMailto');
    const copyBtn   = document.getElementById('copyEmail');

    // Obfuscate until click
    const user   = 'tips';
    const domain = 'corridorledger.com';

    revealBtn.addEventListener('click', () => {
      const addr = `${user}@${domain}`;
      tipMailto.textContent = addr;
      tipMailto.href = `mailto:${addr}?subject=Tip`;
      emailBox.hidden = false;
      revealBtn.setAttribute('aria-expanded','true');
      revealBtn.hidden = true;
    });

    copyBtn.addEventListener('click', async () => {
      try {
        await navigator.clipboard.writeText(`${user}@${domain}`);
        copyBtn.textContent = 'Copied';
        setTimeout(()=>copyBtn.textContent='Copy', 1400);
      } catch {}
    });
  </script>
</body>
</html>
