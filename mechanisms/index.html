<!DOCTYPE html>
<html lang="en" data-theme="light">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Mechanisms · Corridor Ledger</title>
  <link rel="stylesheet" href="/main.css" />
  <link rel="icon" href="/favicon.ico" />
</head>
<body>
  <header class="site-header">
    <div class="brand">
      <button class="icon-btn menu-btn" id="menuToggle" aria-label="Open menu" aria-expanded="false" aria-controls="dropdown">☰</button>
      <a href="/" class="logo-link" aria-label="Corridor Ledger home">
        <img src="/wordmark_header_1200w.png" class="wordmark wordmark-light" alt="Corridor Ledger" />
        <img src="/wordmark_header_dark_1200w.png" class="wordmark wordmark-dark" alt="Corridor Ledger" />
      </a>
      <button class="icon-btn theme-btn" id="themeToggle" aria-label="Toggle dark mode">
        <img src="/sun_grunge_black_transparent.png" class="theme-icon theme-icon-sun" alt="" />
        <img src="/moon_grunge_white_transparent.png" class="theme-icon theme-icon-moon" alt="" />
      </button>
    </div>
    <div class="dropdown" id="dropdown" aria-hidden="true">
      <form class="dropdown-search" role="search" aria-label="Site search" action="/search/" method="GET">
        <input class="search-input" type="search" name="q" placeholder="Search Corridor Ledger" />
      </form>
      <nav class="dropdown-nav">
        <a href="/" data-route="/">Home</a>
        <a href="/mechanisms/" data-route="/mechanisms/">Mechanisms</a>
        <a href="/figures/" data-route="/figures/">Figures</a>
        <a href="/numbers/" data-route="/numbers/">Numbers</a>
        <a href="/dossiers/" data-route="/dossiers/">Dossiers</a>
        <a href="/tips/" data-route="/tips/">Tips</a>
      </nav>
    </div>
    <div class="dropdown-backdrop" id="backdrop" aria-hidden="true"></div>
  </header>

  <main class="container" data-pagefind-body data-section="Mechanisms">
    <section class="rail">
      <article class="hero hero-center">
        <h1 class="headline">Mechanisms</h1>
        <p class="dek">Rules, contracts, and procedures—where leverage hides.</p>
      </article>
    </section>

    <section class="rail">
      <div class="issues-grid">
        <a class="issue-card article-card" href="#">
          <div class="issue-meta">
            <div class="issue-title">Emergency Item Rules</div>
            <p class="issue-tease">The gates that let “urgent” items in—and how they stretch.</p>
            <span class="btn-ghost">Read more →</span>
          </div>
        </a>
      </div>
    </section>
  </main>

  <footer class="site-footer">
    <div class="foot-left">
      <a href="/feed.xml">RSS</a> · <a href="/corrections/">Corrections</a> ·
      <a href="mailto:editor@corridorledger.com">Editor</a> · <a href="/tips/">Tips</a>
    </div>
    <div class="foot-right">© 2025 Corridor Ledger</div>
  </footer>

  <script>
    const menuToggle=document.getElementById('menuToggle');
    const dropdown=document.getElementById('dropdown');
    const backdrop=document.getElementById('backdrop');
    const themeToggle=document.getElementById('themeToggle');
    const root=document.documentElement;

    function openDropdown(open){
      dropdown.classList.toggle('open',open);
      backdrop.classList.toggle('show',open);
      menuToggle.setAttribute('aria-expanded',open?'true':'false');
      dropdown.setAttribute('aria-hidden',open?'false':'true');
      document.body.classList.toggle('no-scroll',open);
      if(open){ markActive(); dropdown.querySelector('.search-input')?.focus(); }
    }
    menuToggle.addEventListener('click',()=>openDropdown(!dropdown.classList.contains('open')));
    backdrop.addEventListener('click',()=>openDropdown(false));
    document.addEventListener('keydown',e=>{ if(e.key==='Escape') openDropdown(false); });
    dropdown.addEventListener('click',e=>{ if(e.target.tagName==='A') openDropdown(false); });

    function markActive(){
      const path=(location.pathname.replace(/\/+$/,'/')||'/');
      document.querySelectorAll('.dropdown-nav [data-route]').forEach(a=>{
        const r=a.getAttribute('data-route');
        a.classList.toggle('active', (r==='/'&&path==='/') || (r!=='/'&&path.startsWith(r)));
      });
    }

    (function initTheme(){
      const saved=localStorage.getItem('cl-theme');
      if(saved==='dark'||saved==='light'){ root.setAttribute('data-theme',saved); }
      else if(window.matchMedia && window.matchMedia('(prefers-color-scheme: dark)').matches){
        root.setAttribute('data-theme','dark');
      }
    })();
    themeToggle.addEventListener('click',()=>{
      const next=root.getAttribute('data-theme')==='dark'?'light':'dark';
      root.setAttribute('data-theme',next); localStorage.setItem('cl-theme',next);
    });
  </script>
</body>
</html>
